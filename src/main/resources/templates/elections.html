<html xmlns:th="http://www.thymeleaf.org"
      th:include="layouts/layout :: page(userId=${userId},citizen=${citizen},admin=${admin},head=${head})"
      lang="en"
>
    <head>
        <title>eIzbori</title>
    </head>
    <body>
        <section th:fragment="content">
            <div class="container">
                <h4>Upcoming elections</h4>
                <table class="table table-sm table-bordered align-middle mt-3 mb-5">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Event Date</th>
                            <th th:style="${'color: red;'}">Deadline</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="election : ${elections}">
                            <td th:text="${election.name}"></td>
                            <td th:text="${#temporals.format(election.eventDate, 'dd.MM.yyyy.')}"></td>
                            <td th:text="${#temporals.format(election.deadline, 'dd.MM.yyyy.')}" th:style="${'color: red;'}"></td>
                            <td class="text-center">
                                <a th:if="${election.canApply == true}"
                                   th:href="@{/{userId}/elections/{electionId}/application(userId=${userId},electionId=${election.id})}"
                                   class="btn btn-sm btn-primary"
                                >Apply</a>
                                <a th:if="${election.canApply == false}"
                                   class="btn btn-sm btn-secondary disabled"
                                >Apply</a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="container">
                <h4>My requests</h4>
                <div class="table-responsive mt-3">
                    <table class="table table-sm table-bordered align-middle">
                        <thead>
                            <tr>
                                <th>Elections</th>
                                <th>Fist Name</th>
                                <th>Last Name</th>
                                <th>Date of Birth</th>
                                <th>Address</th>
                                <th>OIB</th>
                                <th>ID Number</th>
                                <th>Date Created</th>
                                <th>Status</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="request : ${requests}">
                                <td th:text="${request.electionName}"></td>
                                <td th:text="${request.firstName}"></td>
                                <td th:text="${request.lastName}"></td>
                                <td th:text="${#temporals.format(request.dob, 'dd.MM.yyyy.')}"></td>
                                <td th:text="${request.address}"></td>
                                <td th:text="${request.oib}"></td>
                                <td th:text="${request.idn}"></td>
                                <td th:text="${#temporals.format(request.dateCreated, 'dd.MM.yyyy.')}"></td>
                                <td th:text="${request.status}"></td>
                                <td class="text-center">
                                    <a th:if="${request.status == 'Returned'}"
                                       th:href="@{/{userId}/elections/{electionId}/application/edit(userId=${userId},electionId=${request.electionId})}"
                                       class="btn btn-sm btn-primary"
                                    >Edit</a>
                                    <a th:if="${request.status != 'Returned'}"
                                       class="btn btn-sm btn-secondary disabled"
                                    >Edit</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </body>
</html>